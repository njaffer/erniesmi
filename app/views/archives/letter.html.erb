
<div class ="container">
	<% 
	   id = params[:id] 
	   a = Archive.where("id=?",id)
	   a = a.first
	%>
	<p><b>Title: </b><%= a.caption%></p> 
	<% base_url = "https://ernie-tpics.s3.amazonaws.com/tpics/" 
	if (a.fname.nil?)
    fname_url = "ernie.png"
   else 
    fname_url = base_url+a.fname 
   end  
	 %>
	<% url = image_url(fname_url)%>
	<p><%= image_tag(url, style: 'height:60%;width:60%;') %></p>
	<p><b>Year:</b> <%= a.pyear %> <br>
        <b>Date:</b> <%= a.pdate %> <br>

        <b>County:</b> 
    	  <% if (!a.county.nil?) %>,
    	    <%= link_to a.county, search_archives_path(:county => a.county, :countysearch=>1)  %>
    	  <% end %>
    	  <% if (!a.county1.nil?) %>,
    	    <%= link_to a.county1, county_archives_path(:county => a.county1)  %>
    	  <%end%> 
    	  <% if (!a.county2.nil?) %>, 
    	    <%= link_to a.county2, county_archives_path(:county => a.county2)  %> 
    	  <%end%>
    	  <% if (!a.county3.nil?) %>,
    	    <%= link_to a.county3, county_archives_path(:county => a.county3)  %>
    	  <%end%> 
    	  <br>
    	<b>City:</b> 
    	  <%=a.city %> <% if (!a.city1.nil?) %>,<%end%> 
    	  <%=a.city1 %> <% if (!a.city2.nil?) %>,<%end%> 
    	  <%=a.city2 %> <% if (!a.city3.nil?) %>,<%end%> 
    	  <%=a.city3 %><br>
    	<b>Category:</b> 
    	  <%=a.category %> <% if (!a.category1.nil?) %>,<%end%> 
    	  <%=a.category1 %> <% if (!a.category2.nil?) %>,<%end%> 
    	  <%=a.category2 %> <% if (!a.category3.nil?) %>,<%end%> 
    	  <%=a.category3 %> <% if (!a.category4.nil?) %>,<%end%> 
    	  <%=a.category4 %> <% if (!a.category5.nil?) %>,<%end%> 
    	  <%=a.category5 %> <% if (!a.category6.nil?) %>,<%end%> 
    	  <%=a.category6 %> <% if (!a.category7.nil?) %>,<%end%> 
    	  <%=a.category7 %> <% if (!a.category8.nil?) %>,<%end%> 
    	  <%=a.category8 %> <% if (!a.category9.nil?) %>,<%end%> 
    	  <%=a.category9 %> <% if (!a.category10.nil?) %>,<%end%> 
    	  <%=a.category10 %> <% if (!a.category11.nil?) %>,<%end%> 
    	  <%=a.category11 %> <% if (!a.category12.nil?) %>,<%end%> 
    	  <%=a.category12 %> <% if (!a.category13.nil?) %>,<%end%> 
    	  <%=a.category13 %> <% if (!a.category14.nil?) %>,<%end%> 
    	  <%=a.category14 %> <% if (!a.category15.nil?) %>,<%end%> 
    	  <%=a.category15 %> <% if (!a.category16.nil?) %>,<%end%> 
    	  <%=a.category16 %> <% if (!a.category17.nil?) %>,<%end%> 
    	  <%=a.category17 %> <% if (!a.category18.nil?) %>,<%end%> 
    	  <%=a.category18 %> <% if (!a.category19.nil?) %>,<%end%> 
    	  <%=a.category19 %> <% if (!a.category20.nil?) %>,<%end%> 
    	  <%=a.category20 %> 
    	  <br>
    	  <%
          associated = Archive.where("ptype=?",a.id)
          associated_count = associated.count
          num = 1 
          %>
          <b>Associated Pages: </b><%=associated_count%> <br>
          <% associated.each do |assoc| %>

          <p><%=num%>. <%=assoc.caption %></p>
          <% num= num+1 %>
        <%end%>
     </p>

</div>

<div id="openseadragon1" style="width: 800px; height: 600px;"></div>
<script src="/openseadragon/openseadragon.min.js"></script>

<script type="text/javascript">
    var viewer = OpenSeadragon({
        id: "openseadragon1",
        
        prefixUrl: "https://ernie-tpics.s3.amazonaws.com/tpics/",

        navigatorDisplayRegionColor: '#000',
        tileSources: {
            type: 'image',
            url:  '<%=url %>'
        }
    });
</script>