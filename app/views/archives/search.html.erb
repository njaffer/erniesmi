<div class="container">
 <p align="center"><%= paginate $shortlist, window: 3 %></p> 
<% base_url = "https://ernie-tpics.s3.amazonaws.com/tpics/" %>  

<% $lastpage = params["page"] %>
<h4>  

    <%= $archivelist.count %> archives found </h4><%= button_to "Advanced Search", advanced_search_archives_path, :method => "get" %>
<% 
%>
<% $shortlist.each do |a| %>
<% if (a.fname.nil?)
    fname_url = "ernie.png"
   else 
    fname_url = base_url+a.fname 
   end 
%>
<% url = image_url(fname_url)%>
<% access_level = check_current_access %>
<div class="card" style="width: 100%;">
  
   <div class="card-body">
   	<div class="row">
   		<div class="col-2">
   			<p><%= link_to image_tag(url, style: 'height:40%;width:40%;'), letter_archives_path(:id => a.id) %>
   			</p>
            <% if (access_level==1) %>
              <p> <%= link_to "Edit", edit_archives_path(:id => a.id)  %></p>
            <% end %> 
   		</div>
   		<div class="col-10">	
    	<p class="card-title"><b>Title:</b> <%=a.caption%>  <%= link_to "Read More..", letter_archives_path(:id => a.id)  %>

    	<br>
    	<b>Year:</b> <%= a.pyear %> <br>
        <b>Date:</b> <%= a.pdate %> <br>
        
    	<b>County:</b> 
    	  
    	  <% if (!a.county1.nil?) %>
    	    <%= link_to a.county1, search_archives_path(:county => a.county1)  %>
    	  <%end%> 
    	  <% if (!a.county2.nil?) %>, 
    	    <%= link_to a.county2, search_archives_path(:county => a.county2)  %> 
    	  <%end%>
    	  <% if (!a.county3.nil?) %>,
    	    <%= link_to a.county3, search_archives_path(:county => a.county3)  %>
    	  <%end%> 
         <% if (!a.county4.nil?) %>
          <%= link_to a.county4, search_archives_path(:county => a.county4)  %>
        <%end%> 
        <% if (!a.county5.nil?) %>, 
          <%= link_to a.county5, search_archives_path(:county => a.county5)  %> 
        <%end%>
        <% if (!a.county6.nil?) %>,
          <%= link_to a.county6, search_archives_path(:county => a.county6)  %>
        <%end%> 
         <% if (!a.county7.nil?) %>
          <%= link_to a.county7, search_archives_path(:county => a.county7)  %>
        <%end%> 
        <% if (!a.county8.nil?) %>, 
          <%= link_to a.county8, search_archives_path(:county => a.county8)  %> 
        <%end%>
        <% if (!a.county9.nil?) %>,
          <%= link_to a.county9, search_archives_path(:county => a.county9)  %>
        <%end%> 
        <% if (!a.county10.nil?) %>,
          <%= link_to a.county10, search_archives_path(:county => a.county10)  %>
        <%end%> 
    	  <br>
    	<b>City:</b> 
    	  <%=a.city1 %> <% if (!a.city2.nil?) %>,<%end%> 
    	  <%=a.city2 %> <% if (!a.city3.nil?) %>,<%end%> 
        <%=a.city3 %> <% if (!a.city4.nil?) %>,<%end%> 
        <%=a.city4 %> <% if (!a.city5.nil?) %>,<%end%> 
        <%=a.city5 %> <% if (!a.city6.nil?) %>,<%end%> 
        <%=a.city6 %> <% if (!a.city7.nil?) %>,<%end%> 
        <%=a.city7 %> <% if (!a.city8.nil?) %>,<%end%> 
        <%=a.city8 %> <% if (!a.city9.nil?) %>,<%end%> 
        <%=a.city9 %> <% if (!a.city10.nil?) %>,<%end%> 
    	  <%=a.city10 %><br>
    	<b>Category:</b> 
    	  <%=a.category1 %> <% if (!a.category2.nil?) %>,<%end%> 
    	  <%=a.category2 %> <% if (!a.category3.nil?) %>,<%end%> 
    	  <%=a.category3 %> <% if (!a.category4.nil?) %>,<%end%> 
    	  <%=a.category4 %> <% if (!a.category5.nil?) %>,<%end%> 
    	  <%=a.category5 %> <% if (!a.category6.nil?) %>,<%end%> 
    	  <%=a.category6 %> <% if (!a.category7.nil?) %>,<%end%> 
    	  <%=a.category7 %> <% if (!a.category8.nil?) %>,<%end%> 
    	  <%=a.category8 %> <% if (!a.category9.nil?) %>,<%end%> 
    	  <%=a.category9 %> <% if (!a.category10.nil?) %>,<%end%> 
    	  <%=a.category10 %> <% if (!a.category11.nil?) %>,<%end%> 
    	  <%=a.category11 %> <% if (!a.category12.nil?) %>,<%end%> 
    	  <%=a.category12 %> <% if (!a.category13.nil?) %>,<%end%> 
    	  <%=a.category13 %> <% if (!a.category14.nil?) %>,<%end%> 
    	  <%=a.category14 %> <% if (!a.category15.nil?) %>,<%end%> 
    	  <%=a.category15 %> <% if (!a.category16.nil?) %>,<%end%> 
    	  <%=a.category16 %> <% if (!a.category17.nil?) %>,<%end%> 
    	  <%=a.category17 %> <% if (!a.category18.nil?) %>,<%end%> 
    	  <%=a.category18 %> <% if (!a.category19.nil?) %>,<%end%> 
    	  <%=a.category19 %> <% if (!a.category20.nil?) %>,<%end%> 
    	  <%=a.category20 %> 
    	  <br>
   		  <%
          associated = Archive.where("ptype=?",a.id)
          associated_count = associated.count
        %>
        <b>Associated Pages: </b><%=associated_count%> <br> 
   		
    	</p>
        </div>
    </div>
   </div>
  </div>

<% end%>
<p align="center"><%= paginate $shortlist, window: 3 %></p>

</div>